package net.datasa.web2.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import jakarta.servlet.http.Cookie;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import lombok.extern.slf4j.Slf4j;

//쿠키 테스트
@Controller
@RequestMapping("ck")
@Slf4j
public class CookieController {

	//http://localhost:8888/ck/cookie1 경로로 요청이 오면
	//이 메소드를 실행하고 메인화면으로 리다이렉트 한다. 
	// 이곳을 왔다갔는지 확인하도록 콘솔에 문자열을 출력한다.
	@GetMapping("cookie1")
	public String cookie1(
			HttpServletRequest request
			, HttpServletResponse response) {
		
		log.debug(request.getRemoteAddr());
		//쿠키 생성
		Cookie a = new Cookie("str", "abcdefg");
		Cookie b = new Cookie("num", "123");
		//쿠키 종료 시점(3개월)
		a.setMaxAge(60*60*24*3);
		b.setMaxAge(60*60*24*3);
		//쿠키 경로
		a.setPath("/");
		b.setPath("/");
		
		log.debug("cookie1 실행");
		return "redirect:/";
	}
}
