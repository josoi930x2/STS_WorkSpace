package net.datasa.web2.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import jakarta.servlet.http.HttpSession;
import lombok.extern.slf4j.Slf4j;

@Controller
@RequestMapping("ss")
@Slf4j
public class SessionController {
	
	//세션에 값 저장 (세션<->쿠키:간단한 정보, 클라이언트쪽에 저장)
	@GetMapping("session1")
	public String session1(HttpSession session) {
		
		session.setAttribute("name", "abced");
		// 삭제 removeAttribute
		return "redirect:/";
	}
	
	//세션에서 값 읽기
	@GetMapping("session2")
	public String session2(HttpSession session) {
		//getAttribute : 전부 오브젝트 형으로 저장됨 ->캐스팅 필요
		String s = (String)session.getAttribute("name");
		
		log.debug("세션의 값: {}", s);
		return "ssView/session1";
	}
	
	//세션 값 삭제
	@GetMapping("session3")
	public String session3(HttpSession session) {
		
		session.removeAttribute("name");
		return "redirect:/";
	}
	
	@GetMapping("login")
	public String login() {
		return "redirect:/";
	}
	
	@GetMapping("logout")
	public String logout() {
		return "redirect:/";
	}

}
