<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
	  xmlns:sec="http://thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<link rel="stylesheet" href="../css/listCSS.css" />
<script th:src="@{/js/jquery-3.7.1.min.js}"></script>

<script>
$(document).ready(function() {
	if('[[${msg}]]') {
		// 내용이 있으면 true, 없으면false
		alert('[[${msg}]]');
	}
	
	$('.updButton').on('click', upt);
	function upt(){
		let num = $(this).attr('data-num');
		if (confirm(num + '번 글을 수정하시겠습니까?')){
			location.href="update?num=" + num;
			}
		}
	
});

</script>

</head>


<body>

	<h1>[ 방명록 ]</h1>
	<p><img src="/images/write.png" id="img1"></p>
	<p><a href="write">글쓰기</a></p>
	
	<hr>
	
	<!-- 글 내용 반복 출력 부분 -->
	<!--/* <p>[[${list}]] </p> */-->
	
	<table th:each="guest : ${list}" class="list">
		<tr>
		  <th>번호 : </th>
		  <td th:text="${guest.num}">번호</td>
		</tr>
		<tr>
		  <th>작성자 : </th>
		  <td th:text="${guest.name}">이름</td>
		</tr>
		<tr>
		  <th>작성일 : </th>
		  <td th:text="${#temporals.format(guest.inputdate, 'yy년MM월dd일 HH시mm분ss초')}">작성일</td>
		</tr>
		<tr>
		  <th>내용 : </th>
		  <td th:text="${guest.message}">내용</td>
		</tr>
		<tr>
		  <td colspan="2">
		  <form method="post" >
		  	<input type="hidden" name="num" th:value="${guest.num}">
		  	<label>비밀번호</label>
		  	<input type="text" name="password" required>
		 	<!-- <input type="submit" name="delete" value="삭제"> -->
			<button type="submit" formaction="/delete">삭제</button>	
			<button type="submit" formaction="/updateForm">수정</button>	
		 	
			<!-- /*
		 	<button><a th:href="|update?num=${guest.num}|">수정</a></button>
		 	*/-->
		  </form>
		  
		</tr>
		<br>
	</table>


</body>
</html>